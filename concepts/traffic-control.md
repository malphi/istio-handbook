---
authors: ["linda01232003"]
reviewers: ["malphi"]
---

# 流量控制

Istio 可以支持用户配置简单的规则配置和流量路由，从而使得用户可以方便的控制服务之间的流量控制。Istio简化了服务级属性（如熔断器、超时和重试）的配置，并且更加方便的落地A/B测试、金丝雀发布以及按流量百分比划分的分阶段发布。

比如流量路由配置，一个典型的例子是将流量发送到被指定为服务子集的服务的不同版本。客户端将虚拟服务视为一个单一实体，将请求发送至虚拟服务主机，然后 Envoy 根据虚拟服务规则把流量路由到不同的版本。例如，“20% 的调用转到新版本”或“将这些用户的调用转到版本 2”。这允许您创建一个金丝雀发布，逐步增加发送到新版本服务的流量百分比。流量路由完全独立于实例部署，这意味着实现新版本服务的实例可以根据流量的负载来伸缩，完全不影响流量路由。而 Kubernetes 这样的容器编排平台只支持基于实例缩放的流量分发，不能满足新增实例切换流量的场景。

除了使用流量路由配置来控制流量以外，Istio 还提供了可选的故障恢复和故障注入功能，您可以在运行时动态配置这些功能。使用这些特性可以让您的应用程序运行稳定，确保服务网格能够容忍故障节点，并防止局部故障级联影响到其他节点。比如设置超时、重试、熔断器以及故障注入，都可以在对应用程序完全透明的情况下注入对应的策略。

Istio 拥有更好的对流量的可观测性以及开箱即用的故障恢复特性，也就是说用户可以更加方便的捕获故障或问题并且快速修复，这样无论是遇到任何异常情况都可以使调用链路更加可靠更加健壮。